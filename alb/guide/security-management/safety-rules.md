# 安全规则

当您需要对客户端访问ALB的服务添加访问控制时，您可以通过设置外网防火墙和安全组，配置入方向的允许或拒绝规则，达到访问控制的目的。

外网防火墙仅支持控制外网的流量，安全组用于控制内网和外网的流量。

# 前提条件

- 您已经创建一个ALB实例。
- 您已经创建了外网防火墙规则/安全组规则。

# 安全组

## 加入安全组

您可以通过为ALB实例添加安全组，允许或禁止安全组内的ALB实例被公网或私网地址的访问。

1. 登录应用型负载均衡ALB控制台。
2. 在顶部导航栏，选择ALB实例所属的地域。
3. 在**实例**页面，找到目标实例，单击实例ID。
4. 在实例详情页的**安全规则**页签下，单击**立即配置**。
5. 在弹出的对话框中，选择安全组，并选择一个或多个安全组，然后单击**确定**。
6. 如需新建安全组，您可以在**选择安全组**下拉框中单击**创建安全组**。
7. 如需修改安全组规则，在**安全规则**页签中，选择需要编辑的安全组规则，单击**操作栏中的详情**，进入安全组详情页面操作。

## 解绑安全组

您可以根据业务需求解绑ALB实例的安全组。

1. 登录应用型负载均衡ALB控制台。
2. 在顶部导航栏，选择ALB实例所属的地域。
3. 在**实例**页面，找到目标实例，单击实例ID。
4. 在实例详情页选择**安全规则**页签，在左上角点击**配置安全规则**，然后选择不绑定，单击**确定**。

# 外网防火墙

## 绑定外网防火墙

1. 登录应用型负载均衡ALB控制台。
2. 在顶部导航栏，选择所属地域。
3. 在负载均衡控制台，选择**应用型负载均衡**TAB页 。
4. 进入应用型负载均衡列表页，选择需要绑定的ALB实例。
5. 点击进入负载均衡详情页，在负载均衡详情页选择**安全规则**页签。

![1713869802400](/images/1713869802400.png)

6. 在安全规则页签，点击立即绑定，选择您需要绑定的防火墙实例。

## 解绑外网防火墙

1. 登录应用型负载均衡ALB控制台。
2. 在顶部导航栏，选择所属地域。
3. 在负载均衡控制台，选择**应用型负载均衡**TAB页 。
4. 进入应用型负载均衡列表页，选择需要绑定的ALB实例。
5. 点击进入负载均衡详情页，在负载均衡详情页选择**安全规则**页签。
6. 在安全规则页签，点击左上角**解绑防火墙**。

![1713869844940](/images/1713869844940.png)

7. 在弹出的二次确认框，点击确定。

## 更换外网防火墙

1. 登录应用型负载均衡ALB控制台。
2. 在顶部导航栏，选择所属地域。
3. 在负载均衡控制台，选择**应用型负载均衡**TAB页 。
4. 进入应用型负载均衡列表页，选择需要绑定的ALB实例。
5. 点击进入负载均衡详情页，在负载均衡详情页选择**安全规则**页签。
6. 在安全规则页签，点击左上角**更换防火墙**。

![1713869870715](/images/1713869870715.png)

7. 在弹出的更换防火墙弹窗中，选择需要更换的防火墙，点击确定。

# 说明

- ALB实例未加入安全组或外网防火墙时，ALB监听端口默认对所有请求放行。
- 当您创建的双栈ALB实例，希望控制实例的IPv6流量时，您可以选择为ALB实例添加安全组，同时可基于业务设置相应的安全组规则
- ALB实例只能选择安全组和外网防火墙中的一个绑定