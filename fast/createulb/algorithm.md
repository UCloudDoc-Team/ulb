

# 负载均衡算法

## 算法说明

* **轮询**。ULB接收到新的TCP连接后, 依次转给每个后端服务节点。
* **源地址**。ULB会根据TCP连接的源地址，利用一定的哈希算法将请求其转给某个服务节点。之后用户再以相同源IP访问, 如服务节点数量不变时，访问还是会落到该服务节点。
* **源地址（计算端口）**。ULB会根据TCP连接的源地址和源端口，利用一定的哈希算法将请求其转给某个服务节点。（仅报文转发模式支持）
* **一致性哈希**。一致性哈希算法是根据源目的IP，使用一致性哈希算法的结果选择后端服务节点。如果增加或者删减后端服务节点，仅仅会影响小部分连接。（仅报文转发模式支持）
* **一致性哈希（计算端口）**。根据源目的IP、源目的端口，使用一致性哈希算法的结果选择后端服务节点。如果增加或者删减后端服务节点，仅仅会影响小部分连接。（仅报文转发模式支持）
* **加权轮询**。ULB接收到新的TCP连接后，将根据您指定的后端服务节点的不同权重，按照概率分配给各个服务节点。
* **最小连接数**。ULB接受到新的TCP连接后，会实时统计ULB到后端服务节点的连接数，选择连接数最低的服务节点建立新连接并发送数据。（仅请求代理模式支持）
* **主备**。VServer下仅可添加两台服务节点分别作为主备节点。当主节点健康检查失败后， 会自动切换至备节点。（若VServer下有服务节点，则不允许从其他负载均衡算法切换至“主备”算法。）

| 模式 | 支持的转发算法 |
|   :----: |:-----|
|报文转发模式|轮询、源地址、加权轮询、源地址（计算端口）、一致性哈希、一致性哈希（计算端口）、主备|
|请求代理模式|轮询、源地址、加权轮询、最小连接数、主备|
